# 命令参考

## 概述

AstrBot 网页分析插件提供了丰富的命令，用于控制插件的行为、查看配置、管理缓存等。以下是所有可用命令的详细说明。

## 核心命令

### 1. 网页分析

**命令格式：** `/网页分析 <URL>`

**功能：** 手动分析指定的网页链接

**支持的别名：** `/分析`、`/总结`、`/web`、`/analyze`

**示例：**
```
/网页分析 https://example.com
/分析 https://example.com
/web https://example.com
```

**支持多链接：**
```
/网页分析 https://example.com/article1 https://example.com/article2
```

### 2. 命令帮助

**命令格式：** `/web_help`

**功能：** 查看所有可用命令和帮助信息

**支持的别名：** `/网页分析帮助`、`/网页分析命令`

**示例：**
```
/web_help
/网页分析帮助
```

### 3. 分析模式

**命令格式：** `/web_mode [mode]`

**功能：** 查看或切换分析模式

**支持的别名：** `/分析模式`、`/网页分析模式`

**可用模式：**
- `auto`：自动分析模式，检测到链接自动分析（默认）
- `manual`：手动模式，必须使用命令才会分析
- `hybrid`：混合模式，默认自动分析，但管理员可通过命令临时切换
- `LLMTOOL`：LLM Tool模式，让LLM自己决定是否调用analyze_webpage工具

**示例：**
```
# 查看当前模式
/web_mode
# 切换到手动模式
/web_mode manual
# 切换到自动模式
/web_mode auto
```

### 4. 配置管理

**命令格式：** `/web_config`

**功能：** 查看当前插件配置

**支持的别名：** `/网页分析配置`、`/网页分析设置`

**示例：**
```
/web_config
/网页分析配置
```

### 5. 缓存管理

**命令格式：** `/web_cache [action]`

**功能：** 查看缓存状态或管理缓存

**支持的别名：** `/网页缓存`、`/清理缓存`

**可用操作：**
- 无参数：查看缓存状态
- `clear`：清理所有缓存

**示例：**
```
# 查看缓存状态
/web_cache
# 清理缓存
/web_cache clear
/清理缓存
```

### 6. 分析结果导出

**命令格式：** `/web_export <URL|all> [format]`

**功能：** 导出分析结果

**支持的别名：** `/导出分析结果`、`/网页导出`

**可用参数：**
- `URL`：指定要导出的URL
- `all`：导出所有缓存的分析结果

**支持的格式：**
- `md` 或 `markdown`：Markdown格式
- `json`：JSON格式
- `txt`：纯文本格式

**示例：**
```
# 导出指定URL的分析结果为Markdown格式
/web_export https://example.com md
# 导出所有缓存结果为JSON格式
/web_export all json
```

### 7. 群聊黑名单管理

**命令格式：** `/group_blacklist [action] [group_id]`

**功能：** 管理群聊黑名单

**支持的别名：** `/群黑名单`、`/黑名单`

**可用操作：**
- 无参数：查看当前黑名单
- `add <group_id>`：添加群聊到黑名单
- `remove <group_id>`：从黑名单移除群聊
- `clear`：清空黑名单

**示例：**
```
# 查看黑名单
/group_blacklist
# 添加群聊到黑名单
/group_blacklist add 123456789
# 从黑名单移除群聊
/group_blacklist remove 123456789
# 清空黑名单
/group_blacklist clear
```

## 命令使用注意事项

1. **命令权限**：
   - 部分命令（如切换模式、管理黑名单）仅管理员可用
   - 普通用户只能使用分析、帮助、查看配置等基础命令

2. **命令格式**：
   - 命令名称不区分大小写
   - 参数之间需要用空格分隔
   - URL参数可以包含协议头（http://、https://）或不包含（会自动补全）

3. **多链接处理**：
   - 支持同时处理多个链接，最多同时处理10个链接
   - 多链接会合并成一条消息发送

4. **命令补全**：
   - 支持命令补全和参数提示功能
   - 输入命令前缀时会显示可用的命令选项

5. **命令别名**：
   - 所有命令都支持多种别名，方便用户使用
   - 可以在配置中自定义命令别名

## 命令示例汇总

| 场景 | 命令 |
|------|------|
| 分析网页 | `/网页分析 https://example.com` |
| 查看帮助 | `/web_help` |
| 切换分析模式 | `/web_mode manual` |
| 查看配置 | `/web_config` |
| 清理缓存 | `/web_cache clear` |
| 导出分析结果 | `/web_export https://example.com md` |
| 管理群黑名单 | `/group_blacklist add 123456789` |